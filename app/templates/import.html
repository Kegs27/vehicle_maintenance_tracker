<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Transfer - Vehicle Maintenance Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="/static/icon-styles.css" rel="stylesheet">
    <style>
        .form-card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .btn-primary {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            border: none;
            border-radius: 25px;
            padding: 12px 30px;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        /* Background styling */
        body {
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800"><defs><pattern id="tools" patternUnits="userSpaceOnUse" width="200" height="200"><g fill="%23f8f9fa" opacity="0.1"><path d="M20 20h40v40h-40z"/><circle cx="40" cy="40" r="15"/><path d="M60 30h20v20h-20z"/><path d="M90 35h10v10h-10z"/><path d="M110 25h15v30h-15z"/><path d="M135 30h20v20h-20z"/><path d="M160 35h15v10h-15z"/><path d="M180 25h20v30h-20z"/><path d="M25 70h30v20h-30z"/><path d="M65 75h25v10h-25z"/><path d="M100 70h20v20h-20z"/><path d="M130 75h25v10h-25z"/><path d="M165 70h20v20h-20z"/><path d="M30 100h40v30h-40z"/><path d="M80 105h30v20h-30z"/><path d="M120 100h40v30h-40z"/><path d="M170 105h30v20h-30z"/><path d="M40 140h20v20h-20z"/><path d="M70 140h20v20h-20z"/><path d="M100 140h20v20h-20z"/><path d="M130 140h20v20h-20z"/><path d="M160 140h20v20h-20z"/><path d="M50 170h10v10h-10z"/><path d="M80 170h10v10h-10z"/><path d="M110 170h10v10h-10z"/><path d="M140 170h10v10h-10z"/><path d="M170 170h10v10h-10z"/></g></pattern><pattern id="vehicles" patternUnits="userSpaceOnUse" width="300" height="200"><g fill="%23e9ecef" opacity="0.08"><path d="M50 50h200v100h-200z"/><path d="M70 70h160v60h-160z"/><path d="M80 80h140v40h-140z"/><path d="M90 90h120v20h-120z"/><path d="M100 100h100v10h-100z"/><path d="M110 110h80v5h-80z"/><path d="M120 120h60v3h-60z"/><path d="M130 130h40v2h-40z"/><path d="M140 140h20v1h-20z"/><path d="M150 150h10v0.5h-10z"/><path d="M160 160h5v0.25h-5z"/><path d="M170 170h2.5v0.125h-2.5z"/><path d="M180 180h1.25v0.0625h-1.25z"/><path d="M190 190h0.625v0.03125h-0.625z"/><path d="M200 200h0.3125v0.015625h-0.3125z"/><path d="M210 210h0.15625v0.0078125h-0.15625z"/><path d="M220 220h0.078125v0.00390625h-0.078125z"/><path d="M230 230h0.0390625v0.001953125h-0.0390625z"/><path d="M240 240h0.01953125v0.0009765625h-0.01953125z"/><path d="M250 250h0.009765625v0.00048828125h-0.009765625z"/><path d="M260 260h0.0048828125v0.000244140625h-0.0048828125z"/><path d="M270 270h0.00244140625v0.0001220703125h-0.00244140625z"/><path d="M280 280h0.001220703125v0.00006103515625h-0.001220703125z"/><path d="M290 290h0.0006103515625v0.000030517578125h-0.0006103515625z"/><path d="M300 300h0.00030517578125v0.0000152587890625h-0.00030517578125z"/></g></pattern></defs><rect width="1200" height="800" fill="%23ffffff"/><rect width="1200" height="800" fill="url(%23tools)"/><rect width="1200" height="800" fill="url(%23vehicles)"/></svg>');
            background-attachment: fixed;
            background-size: cover;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.05) 0%, rgba(124, 58, 237, 0.05) 100%);
            z-index: -1;
        }
        
        /* Content styling to stand out against background */
        .navbar {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(139, 92, 246, 0.1);
        }
        
        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(139, 92, 246, 0.1);
            box-shadow: 0 8px 32px rgba(139, 92, 246, 0.1);
        }
        
        .form-control, .form-select {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }
        .nav-link {
            color: #6c757d;
            font-weight: 500;
        }
        .nav-link:hover {
            color: #6f42c1;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="/">
                <i class="fas fa-car me-2"></i>Vehicle Maintenance Tracker
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/vehicles">Vehicles</a>
                <a class="nav-link" href="/maintenance">Maintenance</a>
                <a class="nav-link active" href="/import">Data Transfer</a>
            </div>
        </div>
    </nav>

    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card form-card">
                    <div class="card-header bg-primary text-white text-center py-3">
                        <h4 class="mb-0">
                            <i class="fas fa-upload me-2"></i>Import Data File
                        </h4>
                    </div>
                    <div class="card-body p-4">
                        <form action="/import" method="post" enctype="multipart/form-data">
                            <div class="mb-3">
                                <label for="vehicle_id" class="form-label fw-bold">Select Vehicle</label>
                                <select class="form-select" id="vehicle_id" name="vehicle_id" required>
                                    <option value="">Choose a vehicle...</option>
                                    {% for vehicle in vehicles %}
                                        <option value="{{ vehicle.id }}" {% if selected_vehicle_id and selected_vehicle_id == vehicle.id %}selected{% endif %}>
                                            {{ vehicle.name }} ({{ vehicle.year }} {{ vehicle.make }} {{ vehicle.model }})
                                        </option>
                                    {% endfor %}
                                </select>
                            </div>

                            <div class="mb-4">
                                <label for="file" class="form-label fw-bold">CSV File</label>
                                <input type="file" class="form-control" id="file" name="file" accept=".csv" required>
                                <div class="form-text">
                                    <i class="fas fa-info-circle me-1"></i>
                                    Upload your Google Sheets CSV file. The file should have columns for "description", "mileage", "date", and optionally "cost".
                                </div>
                            </div>

                            <div class="mb-4">
                                <label for="handle_duplicates" class="form-label fw-bold">Duplicate Handling</label>
                                <select class="form-select" id="handle_duplicates" name="handle_duplicates">
                                    <option value="skip">Skip duplicates (recommended)</option>
                                    <option value="replace">Replace existing records</option>
                                    <option value="allow">Allow duplicates</option>
                                </select>
                                <div class="form-text">
                                    <i class="fas fa-info-circle me-1"></i>
                                    <strong>Skip:</strong> Ignore duplicate records. <strong>Replace:</strong> Update existing records with new data. <strong>Allow:</strong> Import all records including duplicates.
                                </div>
                            </div>

                            <div class="alert alert-info">
                                <h6 class="alert-heading">
                                    <i class="fas fa-lightbulb me-2"></i>CSV Format Requirements
                                </h6>
                                <ul class="mb-0">
                                    <li><strong>Required columns:</strong> description, mileage, date</li>
                                    <li><strong>Optional columns:</strong> cost</li>
                                    <li><strong>Date formats supported:</strong> M/D/YYYY, M/Y, M-D-YYYY</li>
                                    <li><strong>Mileage formats:</strong> 145,772, 145k, 145000</li>
                                    <li><strong>Cost formats:</strong> $1,234.56, (123.45), 123.45</li>
                                </ul>
                            </div>

                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-upload me-2"></i>Import Data
                                </button>
                                                <a href="/" class="btn btn-outline-secondary">
                    <i class="fas fa-home me-2"></i>Back to Home
                </a>
                            </div>
                        </form>
                    </div>
                </div>

                {% if not vehicles %}
                <div class="alert alert-warning mt-4">
                    <h6 class="alert-heading">
                        <i class="fas fa-exclamation-triangle me-2"></i>No Vehicles Found
                    </h6>
                    <p class="mb-2">You need to add a vehicle before you can import maintenance records.</p>
                    <a href="/vehicles/new" class="btn btn-warning">
                        <i class="fas fa-plus me-2"></i>Add Your First Vehicle
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
